(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1690:function(e,s,t){Promise.resolve().then(t.bind(t,9725))},9725:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var n=t(7437),a=t(2265),r=t(2141);function l(){var e,s,t;let[l,i]=(0,a.useState)("dashboard"),[c,d]=(0,a.useState)([]),[o,x]=(0,a.useState)(!0),[m,h]=(0,a.useState)(null),[u,g]=(0,a.useState)(!1),[p,j]=(0,a.useState)(null),[f,v]=(0,a.useState)({totalSignals:0,totalVotes:0,totalReports:0,totalMemos:0,pendingReports:0,reviewedReports:0,resolvedReports:0,participationRate:0});(0,a.useEffect)(()=>{N()},[]);let N=async()=>{try{x(!0);let[e,s]=await Promise.all([(0,r.to)(),(0,r.Y9)()]);d(e),v(s)}catch(e){console.error("데이터 로딩 실패:",e)}finally{x(!1)}},y=async(e,s)=>{try{await (0,r.oP)(e,s),await N(),alert("상태가 업데이트되었습니다.")}catch(e){console.error("상태 업데이트 실패:",e),alert("상태 업데이트에 실패했습니다.")}},b=async e=>{try{g(!0),j(e);let s=await fetch("/api/review-signal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reportId:e})}),t=await s.json();if(!s.ok)throw Error(t.error||"AI 검토 요청에 실패했습니다.");alert("AI 검토가 완료되었습니다!"),await N()}catch(e){console.error("AI 검토 실패:",e),alert(e instanceof Error?e.message:"AI 검토에 실패했습니다.")}finally{g(!1),j(null)}},w=async e=>{if(!e.ai_suggestion||!e.influencer_signals){alert("AI 수정안이 없습니다.");return}try{let s=JSON.parse(e.ai_suggestion),{error:t}=await r.OQ.from("influencer_signals").update({stock:s.stock,ticker:s.ticker,signal:s.signal,key_quote:s.quote,timestamp:s.timestamp,reasoning:s.analysis_reasoning,updated_at:new Date().toISOString()}).eq("id",e.influencer_signals.id);if(t)throw t;await (0,r.oP)(e.id,"resolved"),alert("AI 수정안이 승인되어 시그널이 업데이트되었습니다."),await N(),h(null)}catch(e){console.error("승인 처리 실패:",e),alert("승인 처리에 실패했습니다.")}},_=async e=>{try{await (0,r.oP)(e,"resolved"),alert("신고가 거절되었습니다."),await N(),h(null)}catch(e){console.error("거절 처리 실패:",e),alert("거절 처리에 실패했습니다.")}},k=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),D=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"reviewed":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},S=e=>{switch(e){case"pending":return"대기";case"reviewed":return"검토";case"resolved":return"완료";default:return e}},C=e=>{switch(e){case"매수":return"bg-green-100 text-green-800";case"긍정":return"bg-blue-100 text-blue-800";case"중립":return"bg-yellow-100 text-yellow-800";case"경계":return"bg-orange-100 text-orange-800";case"매도":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},I=()=>(0,n.jsxs)("div",{className:"space-y-8",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,n.jsx)("div",{className:"bg-blue-100 rounded-full p-3",children:(0,n.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC8"})})}),(0,n.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:f.totalSignals.toLocaleString()}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"총 시그널 수"})]}),(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,n.jsx)("div",{className:"bg-yellow-100 rounded-full p-3",children:(0,n.jsx)("span",{className:"text-2xl",children:"\uD83D\uDEA8"})})}),(0,n.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:f.totalReports.toLocaleString()}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"총 신고 수"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,n.jsx)("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:"대기 중"})]}),(0,n.jsx)("p",{className:"text-3xl font-bold text-yellow-600 mb-1",children:f.pendingReports}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"검토 대기 신고"})]}),(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,n.jsx)("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:"검토 중"})]}),(0,n.jsx)("p",{className:"text-3xl font-bold text-blue-600 mb-1",children:f.reviewedReports}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"검토 진행 신고"})]}),(0,n.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,n.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:"처리 완료"})]}),(0,n.jsx)("p",{className:"text-3xl font-bold text-green-600 mb-1",children:f.resolvedReports}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"완료된 신고"})]})]})]}),A=()=>(0,n.jsx)("div",{className:"space-y-6",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,n.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,n.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["신고 목록 (",c.length,"건)"]})}),0===c.length?(0,n.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,n.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCED"}),(0,n.jsx)("p",{children:"신고된 시그널이 없습니다."})]}):(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"날짜"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"시그널 내용"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"신고 사유"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"AI 검토 결과"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"AI 수정안"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(e=>{var s,t,a,r,l,i,c,d;return(0,n.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:k(e.created_at)}),(0,n.jsx)("td",{className:"px-6 py-4 max-w-xs",children:(0,n.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"font-medium text-sm",children:(null===(s=e.influencer_signals)||void 0===s?void 0:s.stock)||"Unknown"}),(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(C((null===(t=e.influencer_signals)||void 0===t?void 0:t.signal)||"")),children:(null===(a=e.influencer_signals)||void 0===a?void 0:a.signal)||"Unknown"})]}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:(null===(l=e.influencer_signals)||void 0===l?void 0:null===(r=l.speakers)||void 0===r?void 0:r.name)||(null===(d=e.influencer_signals)||void 0===d?void 0:null===(c=d.influencer_videos)||void 0===c?void 0:null===(i=c.influencer_channels)||void 0===i?void 0:i.channel_name)||"Unknown"})]})}),(0,n.jsxs)("td",{className:"px-6 py-4",children:[(0,n.jsx)("div",{className:"text-sm text-gray-900",children:e.reason}),e.detail&&(0,n.jsx)("div",{className:"text-xs text-gray-500 mt-1 truncate max-w-xs",children:e.detail})]}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)("div",{className:"text-sm text-gray-600",children:e.ai_review||(0,n.jsx)("span",{className:"text-yellow-600",children:"대기중"})})}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)("div",{className:"text-sm text-gray-600",children:e.ai_suggestion||(0,n.jsx)("span",{className:"text-yellow-600",children:"대기중"})})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(D(e.status)),children:S(e.status)})}),(0,n.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("button",{onClick:()=>h(e),className:"text-[#3182f6] hover:text-[#1b64da] transition-colors",children:"상세"}),(0,n.jsxs)("select",{value:e.status,onChange:s=>y(e.id,s.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[(0,n.jsx)("option",{value:"pending",children:"대기"}),(0,n.jsx)("option",{value:"reviewed",children:"검토"}),(0,n.jsx)("option",{value:"resolved",children:"완료"})]})]})})]},e.id)})})]})})]})}),[E,R]=(0,a.useState)([]),[q,O]=(0,a.useState)(!1),[P,J]=(0,a.useState)({}),[T,B]=(0,a.useState)(new Set),[F,V]=(0,a.useState)(null),[M,U]=(0,a.useState)(!1),[z,L]=(0,a.useState)(""),[Y,G]=(0,a.useState)(!1),H=async()=>{try{O(!0);let e=await fetch("/api/quality-issues"),s=await e.json();s.success&&R(s.issues)}catch(e){console.error("품질 이슈 로딩 실패:",e)}finally{O(!1)}},Q=async()=>{try{U(!0);let e=await fetch("/api/report-patterns"),s=await e.json();s.success&&V(s.patterns)}catch(e){console.error("신고 패턴 로딩 실패:",e)}finally{U(!1)}},X=async(e,s)=>{try{B(s=>new Set(s).add(e));let t=await fetch("/api/improve-signal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({signalId:e,issueTypes:s})}),n=await t.json();n.success?(J(s=>({...s,[e]:n})),alert("AI 개선안이 생성되었습니다.")):alert("개선안 생성에 실패했습니다: "+n.error)}catch(e){console.error("AI 개선 요청 실패:",e),alert("개선안 생성 중 오류가 발생했습니다.")}finally{B(s=>{let t=new Set(s);return t.delete(e),t})}},Z=async e=>{try{let s=P[e];if(!s)return;let t=JSON.parse(s.improvement),{error:n}=await r.OQ.from("influencer_signals").update({stock:t.stock,ticker:t.ticker,signal:t.signal,key_quote:t.quote,timestamp:t.timestamp,reasoning:t.analysis_reasoning,confidence:t.confidence,updated_at:new Date().toISOString()}).eq("id",e);if(n)throw n;alert("개선안이 승인되어 시그널이 업데이트되었습니다."),J(s=>{let t={...s};return delete t[e],t}),await H()}catch(e){console.error("개선안 승인 실패:",e),alert("개선안 승인에 실패했습니다.")}},K=e=>{J(s=>{let t={...s};return delete t[e],t})},W=async()=>{try{G(!0);let e=await fetch("/api/prompt-improvements",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({patterns:F})}),s=await e.json();s.success?L(s.improvements):alert("프롬프트 개선안 생성에 실패했습니다: "+s.error)}catch(e){console.error("프롬프트 개선안 생성 실패:",e),alert("프롬프트 개선안 생성 중 오류가 발생했습니다.")}finally{G(!1)}};(0,a.useEffect)(()=>{"ai-suggestions"===l&&0===E.length?H():"prompts"!==l||F||Q()},[l]);let $=()=>(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"\uD83E\uDD16 AI 품질 제안"}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:"품질 이슈가 감지된 시그널의 개선안을 확인합니다."})]}),(0,n.jsxs)("button",{onClick:H,disabled:q,className:"px-4 py-2 bg-[#3182f6] text-white rounded-lg hover:bg-[#1b64da] transition-colors flex items-center gap-2",children:[q?(0,n.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):"\uD83D\uDD04","품질 검사 실행"]})]}),q?(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#3182f6] mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"품질 이슈를 분석하는 중..."})]}):0===E.length?(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"✅"}),(0,n.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"품질 이슈 없음"}),(0,n.jsx)("p",{className:"text-gray-600",children:"현재 품질 기준을 만족하지 않는 시그널이 없습니다."})]}):(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,n.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,n.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["품질 이슈 발견: ",E.length,"건"]})}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"시그널 정보"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"이슈 유형"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"현재값"}),(0,n.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"작업"})]})}),(0,n.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map(e=>{var s,t,a;return(0,n.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"font-medium text-sm",children:e.stock}),(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(C(e.signal)),children:e.signal})]}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:(null===(s=e.speakers)||void 0===s?void 0:s.name)||(null===(a=e.influencer_videos)||void 0===a?void 0:null===(t=a.influencer_channels)||void 0===t?void 0:t.channel_name)||"Unknown"}),(0,n.jsx)("div",{className:"text-xs text-gray-400",children:k(e.created_at)})]})}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)("div",{className:"space-y-1",children:e.issueTypes.map(e=>(0,n.jsx)("span",{className:"inline-block px-2 py-1 bg-red-100 text-red-800 text-xs rounded mr-1",children:e},e))})}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)("div",{className:"text-xs text-gray-600 space-y-1",children:Object.entries(e.currentValues).map(e=>{let[s,t]=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{className:"font-medium",children:[s,":"]}),(0,n.jsx)("span",{className:"ml-1 text-gray-500 truncate max-w-32 inline-block",children:String(t)})]},s)})})}),(0,n.jsx)("td",{className:"px-6 py-4",children:P[e.id]?(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("div",{className:"text-xs text-green-600 font-medium",children:"✅ 개선안 생성됨"}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("button",{onClick:()=>Z(e.id),className:"px-3 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:"승인"}),(0,n.jsx)("button",{onClick:()=>K(e.id),className:"px-3 py-1 bg-gray-300 text-gray-700 text-xs rounded hover:bg-gray-400",children:"거절"})]})]}):(0,n.jsx)("button",{onClick:()=>X(e.id,e.issueTypes),disabled:T.has(e.id),className:"px-3 py-1 bg-purple-600 text-white text-xs rounded hover:bg-purple-700 disabled:opacity-50 flex items-center gap-1",children:T.has(e.id)?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-3 h-3 border border-white border-t-transparent rounded-full animate-spin"}),"처리중..."]}):(0,n.jsx)(n.Fragment,{children:"\uD83E\uDD16 AI 개선 요청"})})})]},e.id)})})]})}),Object.entries(P).length>0&&(0,n.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200",children:[(0,n.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uD83D\uDD27 AI 개선안 상세"}),(0,n.jsx)("div",{className:"space-y-6",children:Object.entries(P).map(e=>{let[s,t]=e;try{let e=JSON.parse(t.improvement),a=t.originalSignal,r=E.find(e=>e.id===s);return(0,n.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,n.jsxs)("h5",{className:"font-medium text-gray-900",children:[null==r?void 0:r.stock," - ",null==r?void 0:r.signal]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("button",{onClick:()=>Z(s),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"✅ 승인"}),(0,n.jsx)("button",{onClick:()=>K(s),className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"❌ 거절"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"bg-red-50 rounded-lg p-3",children:[(0,n.jsx)("h6",{className:"font-medium text-red-800 mb-2",children:"\uD83D\uDCCB 원본"}),(0,n.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"종목:"})," ",a.stock]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"신호:"})," ",a.signal]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"인용문:"})," ",a.quote||"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"분석근거:"})," ",a.analysis_reasoning||"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"신뢰도:"})," ",a.confidence||"N/A"]})]})]}),(0,n.jsxs)("div",{className:"bg-green-50 rounded-lg p-3",children:[(0,n.jsx)("h6",{className:"font-medium text-green-800 mb-2",children:"✅ 개선안"}),(0,n.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"종목:"})," ",e.stock]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"신호:"})," ",e.signal]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"인용문:"})," ",e.quote]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"분석근거:"})," ",e.analysis_reasoning]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"신뢰도:"})," ",e.confidence]})]})]})]})]},s)}catch(e){return(0,n.jsx)("div",{className:"border rounded-lg p-4 bg-yellow-50",children:(0,n.jsx)("p",{className:"text-yellow-800",children:"개선안 파싱 오류"})},s)}})})]})]})]}),ee=()=>{var e,s,t,a,r,l;return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"⚙️ 프롬프트 관리"}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:"신고 패턴을 분석하여 프롬프트 개선안을 제안합니다."})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full font-medium",children:"현재 버전: V10"}),(0,n.jsxs)("button",{onClick:Q,disabled:M,className:"px-4 py-2 bg-[#3182f6] text-white rounded-lg hover:bg-[#1b64da] transition-colors flex items-center gap-2",children:[M?(0,n.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):"\uD83D\uDCCA","패턴 분석"]})]})]}),M?(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#3182f6] mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"신고 패턴을 분석하는 중..."})]}):F?(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[(0,n.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"총 신고 건수"}),(0,n.jsx)("p",{className:"text-3xl font-bold text-[#3182f6]",children:F.totalReports})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[(0,n.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"주요 신고 사유"}),(0,n.jsx)("p",{className:"text-lg font-bold text-red-600",children:(null===(e=F.reasonStats[0])||void 0===e?void 0:e.reason)||"N/A"}),(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:[(null===(s=F.reasonStats[0])||void 0===s?void 0:s.count)||0,"건"]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[(0,n.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"문제 신호 유형"}),(0,n.jsx)("p",{className:"text-lg font-bold text-orange-600",children:(null===(t=F.signalTypeStats[0])||void 0===t?void 0:t.signal)||"N/A"}),(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:[(null===(a=F.signalTypeStats[0])||void 0===a?void 0:a.count)||0,"건"]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border",children:[(0,n.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"문제 종목"}),(0,n.jsx)("p",{className:"text-lg font-bold text-purple-600",children:(null===(r=F.stockStats[0])||void 0===r?void 0:r.stock)||"N/A"}),(0,n.jsxs)("p",{className:"text-sm text-gray-500",children:[(null===(l=F.stockStats[0])||void 0===l?void 0:l.count)||0,"건"]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[(0,n.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"\uD83D\uDCCB 사유별 신고 현황"}),(0,n.jsx)("div",{className:"space-y-3",children:F.reasonStats.slice(0,5).map(e=>(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm text-gray-700",children:e.reason}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:"text-sm font-bold",children:[e.count,"건"]}),(0,n.jsx)("div",{className:"w-20 h-2 bg-gray-200 rounded-full",children:(0,n.jsx)("div",{className:"h-2 bg-red-500 rounded-full",style:{width:"".concat(e.count/F.totalReports*100,"%")}})})]})]},e.reason))})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[(0,n.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"\uD83C\uDFAF 시그널 타입별 신고"}),(0,n.jsx)("div",{className:"space-y-3",children:F.signalTypeStats.slice(0,5).map(e=>(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(C(e.signal)),children:e.signal}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("span",{className:"text-sm font-bold",children:[e.count,"건"]}),(0,n.jsx)("div",{className:"w-20 h-2 bg-gray-200 rounded-full",children:(0,n.jsx)("div",{className:"h-2 bg-orange-500 rounded-full",style:{width:"".concat(e.count/F.totalReports*100,"%")}})})]})]},e.signal))})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:"\uD83D\uDE80 프롬프트 개선안 생성"}),(0,n.jsx)("button",{onClick:W,disabled:Y,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:Y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"AI 분석 중..."]}):(0,n.jsx)(n.Fragment,{children:"\uD83E\uDD16 개선안 생성"})})]}),z?(0,n.jsx)("div",{className:"space-y-4",children:(0,n.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,n.jsx)("h4",{className:"font-medium text-green-800",children:"AI 생성 프롬프트 개선 규칙"}),(0,n.jsx)("button",{onClick:()=>navigator.clipboard.writeText(z),className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"\uD83D\uDCCB 복사"})]}),(0,n.jsx)("div",{className:"text-sm text-green-700 whitespace-pre-wrap bg-white rounded border p-3",children:z})]})}):(0,n.jsx)("p",{className:"text-gray-500 text-sm",children:"신고 패턴 분석 결과를 바탕으로 파이프라인 프롬프트의 개선 규칙을 AI가 생성합니다."})]})]}):(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCCA"}),(0,n.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"패턴 분석 대기"}),(0,n.jsx)("p",{className:"text-gray-600",children:"신고 패턴 분석 버튼을 클릭하여 시작하세요."})]})]})};return o?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#3182f6] mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"데이터를 불러오는 중..."})]})}):(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"관리자 대시보드"}),(0,n.jsx)("p",{className:"text-gray-600",children:"시그널 신고 및 시스템을 관리합니다."})]}),(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsx)("div",{className:"border-b border-gray-200",children:(0,n.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"dashboard",label:"\uD83D\uDCCA 대시보드",icon:"\uD83D\uDCCA"},{id:"reports",label:"\uD83D\uDEA8 신고 관리",icon:"\uD83D\uDEA8"},{id:"ai-suggestions",label:"\uD83E\uDD16 AI 제안",icon:"\uD83E\uDD16"},{id:"prompts",label:"⚙️ 프롬프트 관리",icon:"⚙️"}].map(e=>(0,n.jsx)("button",{onClick:()=>i(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors ".concat(l===e.id?"border-[#3182f6] text-[#3182f6]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.label},e.id))})})}),(()=>{switch(l){case"dashboard":default:return I();case"reports":return A();case"ai-suggestions":return $();case"prompts":return ee()}})()]}),m&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:(0,n.jsxs)("div",{className:"p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,n.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"신고 상세 정보"}),(0,n.jsx)("button",{onClick:()=>h(null),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"신고 정보"}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"신고 일시:"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:k(m.created_at)})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"신고 사유:"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:m.reason})]}),m.detail&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"상세 내용:"}),(0,n.jsx)("span",{className:"text-sm font-medium",children:m.detail})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"처리 상태:"}),(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(D(m.status)),children:S(m.status)})]})]})]}),m.influencer_signals&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"시그널 정보"}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"font-medium",children:m.influencer_signals.stock}),(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(C(m.influencer_signals.signal)),children:m.influencer_signals.signal})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"핵심 발언:"}),(0,n.jsxs)("div",{className:"text-sm bg-white p-3 rounded border italic",children:['"',m.influencer_signals.key_quote,'"']})]}),m.influencer_signals.reasoning&&(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"분석 내용:"}),(0,n.jsx)("div",{className:"text-sm bg-white p-3 rounded border whitespace-pre-wrap",children:m.influencer_signals.reasoning})]}),(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:["발언자: ",(null===(e=m.influencer_signals.speakers)||void 0===e?void 0:e.name)||(null===(t=m.influencer_signals.influencer_videos)||void 0===t?void 0:null===(s=t.influencer_channels)||void 0===s?void 0:s.channel_name)||"Unknown"]}),m.influencer_signals.influencer_videos&&(0,n.jsxs)("div",{className:"text-xs text-gray-500",children:["영상: ",m.influencer_signals.influencer_videos.title]})]})]}),m.ai_review&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\uD83E\uDD16 AI 검토 결과"}),(0,n.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,n.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:m.ai_review})})]}),m.ai_suggestion&&m.influencer_signals&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\uD83D\uDD27 AI 수정안"}),(0,n.jsx)("div",{className:"space-y-4",children:(()=>{try{let e=JSON.parse(m.ai_suggestion),s=m.influencer_signals;return(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"bg-red-50 rounded-lg p-4",children:[(0,n.jsx)("h5",{className:"font-medium text-red-800 mb-2",children:"\uD83D\uDCCB 원본 시그널"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"종목:"})," ",s.stock]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"티커:"})," ",s.ticker||"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"신호:"})," ",s.signal]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"인용문:"}),' "',s.quote,'"']}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"타임스탬프:"})," ",s.timestamp]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"분석근거:"})," ",s.analysis_reasoning||"N/A"]})]})]}),(0,n.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,n.jsx)("h5",{className:"font-medium text-green-800 mb-2",children:"✅ AI 수정안"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"종목:"})," ",e.stock]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"티커:"})," ",e.ticker||"N/A"]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"신호:"})," ",e.signal]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"인용문:"}),' "',e.quote,'"']}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"타임스탬프:"})," ",e.timestamp]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"font-medium",children:"분석근거:"})," ",e.analysis_reasoning||"N/A"]})]})]})]})}catch(e){return(0,n.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,n.jsx)("p",{className:"text-yellow-800 text-sm",children:"AI 수정안 파싱 오류"}),(0,n.jsx)("pre",{className:"text-xs mt-2 overflow-x-auto",children:m.ai_suggestion})]})}})()})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,n.jsx)("button",{onClick:()=>h(null),className:"px-4 py-2 text-sm text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"닫기"}),!m.ai_review&&(0,n.jsx)("button",{onClick:()=>b(m.id),disabled:u&&p===m.id,className:"px-4 py-2 text-sm text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:u&&p===m.id?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"AI 검토 중..."]}):(0,n.jsx)(n.Fragment,{children:"\uD83E\uDD16 AI 검토 요청"})}),m.ai_suggestion&&(0,n.jsx)("button",{onClick:()=>w(m),className:"px-4 py-2 text-sm text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:"✅ 수정안 승인"}),(0,n.jsx)("button",{onClick:()=>_(m.id),className:"px-4 py-2 text-sm text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:"❌ 신고 거절"})]})]})]})})})]})}},2141:function(e,s,t){"use strict";t.d(s,{Be:function(){return o},OQ:function(){return n},Y9:function(){return h},getSignalVoteCounts:function(){return x},getStockSignals:function(){return l},hv:function(){return m},kB:function(){return a},l2:function(){return r},oP:function(){return d},pC:function(){return i},to:function(){return c}});let n=(0,t(3053).eI)("https://arypzhotxflimroprmdk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyeXB6aG90eGZsaW1yb3BybWRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwMDYxMTAsImV4cCI6MjA4NzU4MjExMH0.qcqFIvYRiixwu609Wjj9H3HxscU8vNpo9nS_KQ3f00A");async function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{let{data:s,error:t}=await n.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          video_summary,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").order("created_at",{ascending:!1}).limit(e);if(t)return console.error("Error fetching latest signals:",t),[];return s||[]}catch(e){return console.error("Error in getLatestInfluencerSignals:",e),[]}}async function r(e){try{let{data:s,error:t}=await n.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").eq("speaker_id",e).order("created_at",{ascending:!1});if(!s||0===s.length){let{data:a}=await n.from("speakers").select("id").eq("name",e);if(a&&a.length>0){let e=a.map(e=>e.id),{data:r,error:l}=await n.from("influencer_signals").select("\n            *,\n            influencer_videos (\n              title,\n              published_at,\n              video_id,\n              influencer_channels (\n                channel_name,\n                channel_handle\n              )\n            ),\n            speakers (\n              name\n            )\n          ").in("speaker_id",e).order("created_at",{ascending:!1});l||(s=r,t=l)}}if(t)return console.error("Error fetching speaker signals:",t),null;return{speakerName:e,signals:s||[],totalSignals:(null==s?void 0:s.length)||0,stocks:[...new Set(null==s?void 0:s.map(e=>e.stock).filter(Boolean))],channels:[...new Set(null==s?void 0:s.map(e=>{var s,t;return null===(t=e.influencer_videos)||void 0===t?void 0:null===(s=t.influencer_channels)||void 0===s?void 0:s.channel_name}).filter(Boolean))]}}catch(e){return console.error("Error in getInfluencerProfileBySpeaker:",e),null}}async function l(e){try{let s={"005930":"삼성전자","000660":"SK하이닉스","035420":"NAVER","051910":"LG화학","005380":"현대차","086520":"에코프로","009540":"한국가스공사",399720:"퓨처켐",298040:"효성중공업","036930":"주성엔지니어링","042700":"한미반도체","095610":"테스","000720":"현대건설","004170":"신세계","006400":"삼성SDI",267260:"HD현대일렉트릭","090430":"아모레퍼시픽","036570":"NC소프트",207940:"삼성바이오로직스","079160":"CGV",403870:"HPSP",240810:"원익IPS"}[e],t=n.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          video_summary,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ");t=s?t.or("ticker.eq.".concat(e,",stock.eq.").concat(s)):t.eq("ticker",e);let{data:a,error:r}=await t.order("created_at",{ascending:!1});if(r)return console.error("Error fetching stock signals:",r),[];return a||[]}catch(e){return console.error("Error in getStockSignals:",e),[]}}async function i(e,s,t){try{let{data:a,error:r}=await n.from("signal_reports").insert({signal_id:e,reason:s,detail:t||null}).select().single();if(r)throw console.error("Error inserting signal report:",r),r;return a}catch(e){throw console.error("Error in insertSignalReport:",e),e}}async function c(){try{let{data:e,error:s}=await n.from("signal_reports").select("\n        *,\n        influencer_signals (\n          id,\n          stock,\n          ticker,\n          signal,\n          key_quote,\n          reasoning,\n          influencer_videos (\n            title,\n            published_at,\n            video_id,\n            influencer_channels (\n              channel_name,\n              channel_handle\n            )\n          ),\n          speakers (\n            name\n          )\n        )\n      ").order("created_at",{ascending:!1});if(s)return console.error("Error fetching signal reports:",s),[];return e||[]}catch(e){return console.error("Error in getSignalReports:",e),[]}}async function d(e,s){try{let{data:t,error:a}=await n.from("signal_reports").update({status:s}).eq("id",e).select().single();if(a)throw console.error("Error updating report status:",a),a;return t}catch(e){throw console.error("Error in updateReportStatus:",e),e}}async function o(e,s){try{let{data:t,error:a}=await n.from("signal_votes").insert({signal_id:e,vote_type:"like",memo:s}).select().single();if(a)throw console.error("Error inserting signal vote:",a),a;return t}catch(e){throw console.error("Error in insertSignalVote:",e),e}}async function x(e){try{if(!e.length)return{};let{data:s,error:t}=await n.from("signal_votes").select("signal_id").in("signal_id",e);if(t)return console.error("Error fetching signal vote counts:",t),{};let a={};return null==s||s.forEach(e=>{a[e.signal_id]=(a[e.signal_id]||0)+1}),a}catch(e){return console.error("Error in getSignalVoteCounts:",e),{}}}async function m(e,s,t){try{let{data:a,error:r}=await n.from("signal_memos").insert({signal_id:e,memo:s,user_id:t||null}).select().single();if(r)throw console.error("Error inserting signal memo:",r),r;return a}catch(e){throw console.error("Error in insertSignalMemo:",e),e}}async function h(){try{let[e,s,t]=await Promise.all([n.from("influencer_signals").select("id",{count:"exact",head:!0}),n.from("signal_votes").select("id",{count:"exact",head:!0}).catch(()=>({count:0})),n.from("signal_reports").select("id",{count:"exact",head:!0}).catch(()=>({count:0}))]),[a,r,l]=await Promise.all([n.from("signal_reports").select("id",{count:"exact",head:!0}).eq("status","pending").catch(()=>({count:0})),n.from("signal_reports").select("id",{count:"exact",head:!0}).eq("status","reviewed").catch(()=>({count:0})),n.from("signal_reports").select("id",{count:"exact",head:!0}).eq("status","resolved").catch(()=>({count:0}))]),i=e.count||0,c=s.count||0,d=t.count||0,o=(await n.from("signal_memos").select("id",{count:"exact",head:!0}).catch(()=>({count:0}))).count||0;return{totalSignals:i,totalVotes:c,totalReports:d,totalMemos:o,pendingReports:a.count||0,reviewedReports:r.count||0,resolvedReports:l.count||0,participationRate:i>0?Math.round((c+d+o)/i*100):0}}catch(e){return console.error("Error in getAdminStats:",e),{totalSignals:0,totalVotes:0,totalReports:0,totalMemos:0,pendingReports:0,reviewedReports:0,resolvedReports:0,participationRate:0}}}}},function(e){e.O(0,[53,971,117,744],function(){return e(e.s=1690)}),_N_E=e.O()}]);