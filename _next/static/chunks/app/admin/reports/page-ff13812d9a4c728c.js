(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[375],{6087:function(e,n,s){Promise.resolve().then(s.bind(s,7297))},7297:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return l}});var t=s(7437),r=s(2265),a=s(2141);function l(){var e,n,s;let[l,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0),[o,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await (0,a.to)();i(e)}catch(e){console.error("신고 목록 로딩 실패:",e)}finally{d(!1)}},m=async(e,n)=>{try{await (0,a.oP)(e,n),await u(),alert("상태가 업데이트되었습니다.")}catch(e){console.error("상태 업데이트 실패:",e),alert("상태 업데이트에 실패했습니다.")}},h=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),g=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"reviewed":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},f=e=>{switch(e){case"pending":return"대기";case"reviewed":return"검토";case"resolved":return"완료";default:return e}},p=e=>{switch(e){case"매수":return"bg-green-100 text-green-800";case"긍정":return"bg-blue-100 text-blue-800";case"중립":return"bg-yellow-100 text-yellow-800";case"경계":return"bg-orange-100 text-orange-800";case"매도":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return c?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#3182f6] mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"신고 목록을 불러오는 중..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"신고 관리"}),(0,t.jsx)("p",{className:"text-gray-600",children:"사용자가 신고한 시그널들을 확인하고 관리합니다."})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["신고 목록 (",l.length,"건)"]})}),0===l.length?(0,t.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCED"}),(0,t.jsx)("p",{children:"신고된 시그널이 없습니다."})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"신고일시"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"시그널"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"신고사유"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>{var n,s,r,a,l,i,c,d;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:h(e.created_at)}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:(null===(n=e.influencer_signals)||void 0===n?void 0:n.stock)||"Unknown"}),(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(p((null===(s=e.influencer_signals)||void 0===s?void 0:s.signal)||"")),children:(null===(r=e.influencer_signals)||void 0===r?void 0:r.signal)||"Unknown"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:(null===(l=e.influencer_signals)||void 0===l?void 0:null===(a=l.speakers)||void 0===a?void 0:a.name)||(null===(d=e.influencer_signals)||void 0===d?void 0:null===(c=d.influencer_videos)||void 0===c?void 0:null===(i=c.influencer_channels)||void 0===i?void 0:i.channel_name)||"Unknown"})]})}),(0,t.jsxs)("td",{className:"px-6 py-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.reason}),e.detail&&(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.detail})]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(g(e.status)),children:f(e.status)})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>x(e),className:"text-[#3182f6] hover:text-[#1b64da] transition-colors",children:"상세"}),(0,t.jsxs)("select",{value:e.status,onChange:n=>m(e.id,n.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[(0,t.jsx)("option",{value:"pending",children:"대기"}),(0,t.jsx)("option",{value:"reviewed",children:"검토"}),(0,t.jsx)("option",{value:"resolved",children:"완료"})]})]})})]},e.id)})})]})})]})]}),o&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"신고 상세 정보"}),(0,t.jsx)("button",{onClick:()=>x(null),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"신고 정보"}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"신고 일시:"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:h(o.created_at)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"신고 사유:"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:o.reason})]}),o.detail&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"상세 내용:"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:o.detail})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"처리 상태:"}),(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(g(o.status)),children:f(o.status)})]})]})]}),o.influencer_signals&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"시그널 정보"}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-medium",children:o.influencer_signals.stock}),(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(p(o.influencer_signals.signal)),children:o.influencer_signals.signal})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"핵심 발언:"}),(0,t.jsxs)("div",{className:"text-sm bg-white p-3 rounded border italic",children:['"',o.influencer_signals.quote,'"']})]}),o.influencer_signals.analysis_reasoning&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"분석 내용:"}),(0,t.jsx)("div",{className:"text-sm bg-white p-3 rounded border whitespace-pre-wrap",children:o.influencer_signals.analysis_reasoning})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["발언자: ",(null===(e=o.influencer_signals.speakers)||void 0===e?void 0:e.name)||(null===(s=o.influencer_signals.influencer_videos)||void 0===s?void 0:null===(n=s.influencer_channels)||void 0===n?void 0:n.channel_name)||"Unknown"]}),o.influencer_signals.influencer_videos&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["영상: ",o.influencer_signals.influencer_videos.title]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)("button",{onClick:()=>x(null),className:"px-4 py-2 text-sm text-gray-600 bg-gray-100 rounded hover:bg-gray-200 transition-colors",children:"닫기"}),"resolved"!==o.status&&(0,t.jsx)("button",{onClick:()=>{m(o.id,"resolved"),x(null)},className:"px-4 py-2 text-sm text-white bg-green-600 rounded hover:bg-green-700 transition-colors",children:"처리 완료"})]})]})]})})})]})}},2141:function(e,n,s){"use strict";s.d(n,{OQ:function(){return t},getStockSignals:function(){return l},kB:function(){return r},l2:function(){return a},oP:function(){return d},pC:function(){return i},to:function(){return c}});let t=(0,s(3053).eI)("https://arypzhotxflimroprmdk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyeXB6aG90eGZsaW1yb3BybWRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwMDYxMTAsImV4cCI6MjA4NzU4MjExMH0.qcqFIvYRiixwu609Wjj9H3HxscU8vNpo9nS_KQ3f00A");async function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{let{data:n,error:s}=await t.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          video_summary,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").order("created_at",{ascending:!1}).limit(e);if(s)return console.error("Error fetching latest signals:",s),[];return n||[]}catch(e){return console.error("Error in getLatestInfluencerSignals:",e),[]}}async function a(e){try{let{data:n,error:s}=await t.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").eq("speaker_id",e).order("created_at",{ascending:!1});if(!n||0===n.length){let{data:r}=await t.from("speakers").select("id").eq("name",e);if(r&&r.length>0){let e=r.map(e=>e.id),{data:a,error:l}=await t.from("influencer_signals").select("\n            *,\n            influencer_videos (\n              title,\n              published_at,\n              video_id,\n              influencer_channels (\n                channel_name,\n                channel_handle\n              )\n            ),\n            speakers (\n              name\n            )\n          ").in("speaker_id",e).order("created_at",{ascending:!1});l||(n=a,s=l)}}if(s)return console.error("Error fetching speaker signals:",s),null;return{speakerName:e,signals:n||[],totalSignals:(null==n?void 0:n.length)||0,stocks:[...new Set(null==n?void 0:n.map(e=>e.stock).filter(Boolean))],channels:[...new Set(null==n?void 0:n.map(e=>{var n,s;return null===(s=e.influencer_videos)||void 0===s?void 0:null===(n=s.influencer_channels)||void 0===n?void 0:n.channel_name}).filter(Boolean))]}}catch(e){return console.error("Error in getInfluencerProfileBySpeaker:",e),null}}async function l(e){try{let n={"005930":"삼성전자","000660":"SK하이닉스","035420":"NAVER","051910":"LG화학","005380":"현대차","086520":"에코프로","009540":"한국가스공사",399720:"퓨처켐",298040:"효성중공업","036930":"주성엔지니어링","042700":"한미반도체","095610":"테스","000720":"현대건설","004170":"신세계","006400":"삼성SDI",267260:"HD현대일렉트릭","090430":"아모레퍼시픽","036570":"NC소프트",207940:"삼성바이오로직스","079160":"CGV",403870:"HPSP",240810:"원익IPS"}[e],s=t.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          video_summary,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ");s=n?s.or("ticker.eq.".concat(e,",stock.eq.").concat(n)):s.eq("ticker",e);let{data:r,error:a}=await s.order("created_at",{ascending:!1});if(a)return console.error("Error fetching stock signals:",a),[];return r||[]}catch(e){return console.error("Error in getStockSignals:",e),[]}}async function i(e,n,s){try{let{data:r,error:a}=await t.from("signal_reports").insert({signal_id:e,reason:n,detail:s||null}).select().single();if(a)throw console.error("Error inserting signal report:",a),a;return r}catch(e){throw console.error("Error in insertSignalReport:",e),e}}async function c(){try{let{data:e,error:n}=await t.from("signal_reports").select("\n        *,\n        influencer_signals (\n          id,\n          stock,\n          ticker,\n          signal,\n          quote,\n          analysis_reasoning,\n          influencer_videos (\n            title,\n            published_at,\n            video_id,\n            influencer_channels (\n              channel_name,\n              channel_handle\n            )\n          ),\n          speakers (\n            name\n          )\n        )\n      ").order("created_at",{ascending:!1});if(n)return console.error("Error fetching signal reports:",n),[];return e||[]}catch(e){return console.error("Error in getSignalReports:",e),[]}}async function d(e,n){try{let{data:s,error:r}=await t.from("signal_reports").update({status:n}).eq("id",e).select().single();if(r)throw console.error("Error updating report status:",r),r;return s}catch(e){throw console.error("Error in updateReportStatus:",e),e}}}},function(e){e.O(0,[53,971,117,744],function(){return e(e.s=6087)}),_N_E=e.O()}]);