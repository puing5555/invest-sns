(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[108,141],{1510:function(e,n,t){Promise.resolve().then(t.bind(t,6861))},6861:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return m}});var s=t(7437),a=t(2265),l=t(7648),i=t(9323),r=t(2141),o=t(9283),c=t(5382),d=t(5798);let u={매수:"bg-green-600 text-white",긍정:"bg-blue-600 text-white",중립:"bg-gray-500 text-white",경계:"bg-yellow-600 text-white",매도:"bg-red-800 text-white"},h={삼성전자:"005930",SK하이닉스:"000660",현대차:"005380",네이버:"035420",NAVER:"035420",LG화학:"051910",에코프로:"086520",한국가스공사:"009540",퓨처켐:"399720",현대건설:"000720",신세계:"004170",POSCO홀딩스:"005490"};function m(){let[e,n]=(0,a.useState)("latest"),[t,m]=(0,a.useState)(""),[g,x]=(0,a.useState)([]),[f,p]=(0,a.useState)(!0),[v,_]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=(await (0,r.kB)(100)).map(e=>{var n,t,s,a,l,i,r,o,c;return{id:e.id,stock:e.stock,signal_type:e.signal,speaker:(null===(n=e.speakers)||void 0===n?void 0:n.name)||(null===(s=e.influencer_videos)||void 0===s?void 0:null===(t=s.influencer_channels)||void 0===t?void 0:t.channel_name)||"Unknown",channelName:(null===(l=e.influencer_videos)||void 0===l?void 0:null===(a=l.influencer_channels)||void 0===a?void 0:a.channel_name)||"",content_snippet:e.key_quote||"".concat(e.stock," ").concat(e.signal),key_quote:e.key_quote,video_published_at:(null===(i=e.influencer_videos)||void 0===i?void 0:i.published_at)||e.created_at,confidence:e.confidence,reasoning:e.reasoning,videoSummary:null===(r=e.influencer_videos)||void 0===r?void 0:r.video_summary,videoUrl:(null===(o=e.influencer_videos)||void 0===o?void 0:o.video_id)?"https://youtube.com/watch?v=".concat(e.influencer_videos.video_id):"#",videoTitle:null===(c=e.influencer_videos)||void 0===c?void 0:c.title,ticker:e.ticker||null}});x(e)}catch(e){console.error("Failed to load signals:",e)}finally{p(!1)}})()},[]);let k=i.L.flatMap(e=>e.recentCalls.slice(0,3).map(n=>({id:"".concat(e.id,"-").concat(n.stock),stock:n.stock,signal_type:n.direction,speaker:e.name,channelName:e.name,content_snippet:"".concat(n.stock," ").concat(n.direction," 추천"),key_quote:null,video_published_at:n.date,confidence:null,reasoning:null,videoUrl:"#",videoTitle:null}))),b=g.length>0?g:k,y=b.reduce((e,n)=>{let t=e.find(e=>e.stock===n.stock);return t?(t.signals.push(n),t.signal_count++):e.push({stock:n.stock,ticker:n.ticker||h[n.stock]||null,signal_count:1,latest_signal:n.signal_type,latest_date:n.video_published_at,signals:[n]}),e},[]).sort((e,n)=>n.signal_count-e.signal_count),j=e=>u[e]||"bg-gray-500 text-white",w=e=>{if(!e)return"";let n=new Date(e),t=Math.floor((new Date().getTime()-n.getTime())/36e5);if(t<24)return"".concat(t,"시간 전");let s=Math.floor(t/24);return s<30?"".concat(s,"일 전"):n.toLocaleDateString("ko-KR",{month:"short",day:"numeric"})},N=b.filter(e=>""===t||e.stock.toLowerCase().includes(t.toLowerCase())||e.speaker.toLowerCase().includes(t.toLowerCase())).sort((e,n)=>(n.video_published_at||"").localeCompare(e.video_published_at||""));i.L.filter(e=>""===t||e.name.toLowerCase().includes(t.toLowerCase()));let C=y.filter(e=>""===t||e.stock.toLowerCase().includes(t.toLowerCase()));return(0,s.jsxs)("div",{className:"bg-[#f8f9fa] min-h-screen",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"\uD83D\uDCC8 인플루언서 시그널"}),(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("input",{type:"text",placeholder:"종목명 또는 인플루언서 검색...",value:t,onChange:e=>m(e.target.value),className:"w-64 px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm"})})})]}),(0,s.jsx)("div",{className:"flex space-x-8 -mb-px",children:[{id:"latest",label:"\uD83D\uDD25 최신 시그널",count:b.length},{id:"influencers",label:"\uD83D\uDC65 인플루언서",count:i.L.length},{id:"stocks",label:"\uD83D\uDCCA 종목별",count:y.length}].map(t=>(0,s.jsxs)("button",{onClick:()=>n(t.id),className:"pb-4 px-1 border-b-2 font-medium text-sm transition-colors ".concat(e===t.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[t.label," ",(0,s.jsx)("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded-full ml-1",children:t.count})]},t.id))})]})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["latest"===e&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:["총 ",N.length,"개 시그널 ",f&&"(로딩 중...)"]}),N.map(e=>(0,s.jsx)(c.Z,{signal:e.signal_type,stock:e.stock,speaker:e.speaker,channelName:e.channelName,confidence:e.confidence,keyQuote:e.key_quote,reasoning:e.reasoning,videoTitle:e.videoTitle,date:w(e.video_published_at),videoUrl:e.videoUrl,onClick:()=>_({date:e.video_published_at,influencer:e.speaker,signal:e.signal_type,quote:e.key_quote||"",videoUrl:e.videoUrl||"#",analysis_reasoning:e.videoSummary||e.reasoning,videoTitle:e.videoTitle,channelName:e.channelName,ticker:e.ticker||h[e.stock]||null})},e.id))]}),"influencers"===e&&(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(()=>{let e=new Map;return b.forEach(n=>{let t=e.get(n.speaker);if(t)t.count++,n.channelName&&t.channels.add(n.channelName),n.stock&&t.stockCounts.set(n.stock,(t.stockCounts.get(n.stock)||0)+1),n.video_published_at>t.latestDate&&(t.latestSignal=n.signal_type,t.latestDate=n.video_published_at);else{let t=new Set;n.channelName&&t.add(n.channelName);let s=new Map;n.stock&&s.set(n.stock,1),e.set(n.speaker,{count:1,channels:t,latestSignal:n.signal_type,latestDate:n.video_published_at||"",stockCounts:s})}}),Array.from(e.entries()).map(e=>{let[n,t]=e;return{name:n,...t,channelList:Array.from(t.channels),topStocks:Array.from(t.stockCounts.entries()).sort((e,n)=>n[1]-e[1]).slice(0,3).map(e=>{let[n]=e;return n})}}).filter(e=>""===t||e.name.toLowerCase().includes(t.toLowerCase())).sort((e,n)=>n.count-e.count).map(e=>{let n=(0,o.O5)(e.name);return(0,s.jsx)(l.default,{href:"/profile/influencer/".concat(n),children:(0,s.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100 hover:shadow-lg transition-all cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-bold text-lg",children:e.name.charAt(0)}),(0,s.jsx)("div",{children:(0,s.jsx)("h3",{className:"font-bold text-gray-900",children:e.name})})]}),(0,s.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-[#3182f6]",children:e.count}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"시그널 수"})]})}),e.topStocks.length>0&&(0,s.jsx)("div",{className:"text-xs text-gray-400 truncate",children:e.topStocks.join(" \xb7 ")})]})},e.name)})})()}),"stocks"===e&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:["총 ",C.length,"개 종목"]}),C.map(e=>{let n=[...new Set(e.signals.map(e=>e.speaker))],t=n.length<=2?n.join(", "):"".concat(n.slice(0,2).join(", ")," 외 ").concat(n.length-2,"명"),a=e.ticker?"/stock/".concat(e.ticker,"?tab=influencer"):null;return(0,s.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[a?(0,s.jsx)(l.default,{href:a,className:"font-bold text-lg text-[#3182f6] hover:underline",children:e.stock}):(0,s.jsx)("h3",{className:"font-bold text-lg text-gray-900",children:e.stock}),(0,s.jsxs)("div",{className:"px-2 py-1 rounded text-xs font-medium ".concat(j(e.latest_signal)),children:["최신: ",e.latest_signal]})]}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:[e.signal_count,"개 시그널"]})]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mb-3",children:["\uD83D\uDC64 ",t]}),(()=>{let n=e.signals.find(e=>e.key_quote);return n?(0,s.jsxs)("p",{className:"text-sm text-gray-500 italic line-clamp-2",children:["“",n.key_quote,"”",(0,s.jsxs)("span",{className:"not-italic text-gray-400 ml-1",children:["— ",n.speaker]})]}):null})()]},e.stock)})]})]}),(0,s.jsx)(d.Z,{signal:v,onClose:()=>_(null)})]})}},5382:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var s=t(7437);let a={매수:"bg-green-600 text-white",긍정:"bg-blue-600 text-white",중립:"bg-gray-500 text-white",경계:"bg-yellow-600 text-white",매도:"bg-red-800 text-white"};function l(e){let{signal:n,stock:t,speaker:l,channelName:i,keyQuote:r,reasoning:o,videoTitle:c,date:d,videoUrl:u,onClick:h}=e,m=a[n]||"bg-gray-500 text-white",g=i&&l&&(i.includes(l)||l.includes(i)||l===i);return(0,s.jsxs)("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer",onClick:h,children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,s.jsx)("div",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(m),children:n}),(0,s.jsx)("span",{className:"font-bold text-lg text-gray-900",children:t}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:g?i:l})]}),(r||o)&&(0,s.jsxs)("p",{className:"text-[15px] text-gray-700 italic mb-2 leading-relaxed line-clamp-2",children:["“",r||o,"”"]}),c&&(0,s.jsxs)("p",{className:"text-sm text-gray-500 mb-2 line-clamp-1",children:["\uD83D\uDCF9 ",c]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-400",children:[(0,s.jsx)("span",{children:d}),u&&"#"!==u&&(0,s.jsx)("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700",onClick:e=>e.stopPropagation(),children:"영상보기 →"})]})]})}},9283:function(e,n,t){"use strict";t.d(n,{O5:function(){return i},VF:function(){return r}});let s={이효석:"lee-hyoseok",조진표:"cho-jinpyo",코린이아빠:"korini-appa","코린이 아빠":"korini-appa",박지훈:"park-jihoon",배재원:"bae-jaewon",김동훈:"kim-donghoon",김장년:"kim-jangnyeon",고연수:"ko-yeonsu",이건희:"lee-gunhee",장우진:"jang-woojin",김장열:"kim-jangyeol",박병창:"park-byungchang",박명성:"park-myungsung",달란트투자:"dalant-invest",syuka:"syuka",이영수:"lee-youngsu",이정윤:"lee-jungyoon",배재규:"bae-jaegyu",배제기:"bae-jegi",김학주:"kim-hakju"};function a(e){if(/^[a-zA-Z0-9_-]+$/.test(e))return e.toLowerCase();let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return"speaker-".concat(Math.abs(n).toString(36))}let l={};function i(e){return s[e]||a(e)}function r(e){return l[e]||null}Object.entries(s).forEach(e=>{let[n,t]=e;l[t]=n;let s=a(n);s!==t&&(l[s]=n)})},2141:function(e,n,t){"use strict";t.d(n,{OQ:function(){return s},getStockSignals:function(){return i},kB:function(){return a},l2:function(){return l}});let s=(0,t(3053).eI)("https://arypzhotxflimroprmdk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyeXB6aG90eGZsaW1yb3BybWRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwMDYxMTAsImV4cCI6MjA4NzU4MjExMH0.qcqFIvYRiixwu609Wjj9H3HxscU8vNpo9nS_KQ3f00A");async function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{let{data:n,error:t}=await s.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          video_summary,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").order("created_at",{ascending:!1}).limit(e);if(t)return console.error("Error fetching latest signals:",t),[];return n||[]}catch(e){return console.error("Error in getLatestInfluencerSignals:",e),[]}}async function l(e){try{let{data:n,error:t}=await s.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").eq("speaker_id",e).order("created_at",{ascending:!1});if(!n||0===n.length){let{data:a}=await s.from("speakers").select("id").eq("name",e);if(a&&a.length>0){let e=a.map(e=>e.id),{data:l,error:i}=await s.from("influencer_signals").select("\n            *,\n            influencer_videos (\n              title,\n              published_at,\n              video_id,\n              influencer_channels (\n                channel_name,\n                channel_handle\n              )\n            ),\n            speakers (\n              name\n            )\n          ").in("speaker_id",e).order("created_at",{ascending:!1});i||(n=l,t=i)}}if(t)return console.error("Error fetching speaker signals:",t),null;return{speakerName:e,signals:n||[],totalSignals:(null==n?void 0:n.length)||0,stocks:[...new Set(null==n?void 0:n.map(e=>e.stock).filter(Boolean))],channels:[...new Set(null==n?void 0:n.map(e=>{var n,t;return null===(t=e.influencer_videos)||void 0===t?void 0:null===(n=t.influencer_channels)||void 0===n?void 0:n.channel_name}).filter(Boolean))]}}catch(e){return console.error("Error in getInfluencerProfileBySpeaker:",e),null}}async function i(e){try{let n={"005930":"삼성전자","000660":"SK하이닉스","035420":"NAVER","051910":"LG화학","005380":"현대차","086520":"에코프로","009540":"한국가스공사",399720:"퓨처켐",298040:"효성중공업","036930":"주성엔지니어링","042700":"한미반도체","095610":"테스","000720":"현대건설","004170":"신세계","006400":"삼성SDI",267260:"HD현대일렉트릭","090430":"아모레퍼시픽","036570":"NC소프트",207940:"삼성바이오로직스","079160":"CGV",403870:"HPSP",240810:"원익IPS"}[e],t=s.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          video_summary,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ");t=n?t.or("ticker.eq.".concat(e,",stock.eq.").concat(n)):t.eq("ticker",e);let{data:a,error:l}=await t.order("created_at",{ascending:!1});if(l)return console.error("Error fetching stock signals:",l),[];return a||[]}catch(e){return console.error("Error in getStockSignals:",e),[]}}}},function(e){e.O(0,[648,53,442,971,117,744],function(){return e(e.s=1510)}),_N_E=e.O()}]);