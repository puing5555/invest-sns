"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{575:function(n,e,r){r.d(e,{H:function(){return s},a:function(){return l}});var t=r(7437),i=r(2265),a=r(2141);let o=(0,i.createContext)(void 0);function s(n){let{children:e}=n,[r,s]=(0,i.useState)(null),[l,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(!0);(0,i.useEffect)(()=>{a.OQ.auth.getSession().then(n=>{var e;let{data:{session:r}}=n;c(r),s(null!==(e=null==r?void 0:r.user)&&void 0!==e?e:null),d(!1)});let{data:{subscription:n}}=a.OQ.auth.onAuthStateChange((n,e)=>{var r;c(e),s(null!==(r=null==e?void 0:e.user)&&void 0!==r?r:null),d(!1)});return()=>n.unsubscribe()},[]);let f=async(n,e)=>{let{error:r}=await a.OQ.auth.signUp({email:n,password:e});return{error:r}},h=async(n,e)=>{let{error:r}=await a.OQ.auth.signInWithPassword({email:n,password:e});return{error:r}},g=async()=>{let{error:n}=await a.OQ.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/invest-sns/")}});return{error:n}},_=async()=>{await a.OQ.auth.signOut()};return(0,t.jsx)(o.Provider,{value:{user:r,session:l,loading:u,signUp:f,signIn:h,signInWithGoogle:g,signOut:_},children:e})}function l(){let n=(0,i.useContext)(o);if(!n)throw Error("useAuth must be used within AuthProvider");return n}},2141:function(n,e,r){r.d(e,{Be:function(){return u},OQ:function(){return t},Y9:function(){return h},getSignalVoteCounts:function(){return d},getStockSignals:function(){return o},hv:function(){return f},kB:function(){return i},l2:function(){return a},oP:function(){return c},pC:function(){return s},to:function(){return l}});let t=(0,r(3053).eI)("https://arypzhotxflimroprmdk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyeXB6aG90eGZsaW1yb3BybWRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwMDYxMTAsImV4cCI6MjA4NzU4MjExMH0.qcqFIvYRiixwu609Wjj9H3HxscU8vNpo9nS_KQ3f00A");async function i(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{let{data:e,error:r}=await t.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          video_summary,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").order("created_at",{ascending:!1}).limit(n);if(r)return console.error("Error fetching latest signals:",r),[];return e||[]}catch(n){return console.error("Error in getLatestInfluencerSignals:",n),[]}}async function a(n){try{let{data:e,error:r}=await t.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").eq("speaker_id",n).order("created_at",{ascending:!1});if(!e||0===e.length){let{data:i}=await t.from("speakers").select("id").eq("name",n);if(i&&i.length>0){let n=i.map(n=>n.id),{data:a,error:o}=await t.from("influencer_signals").select("\n            *,\n            influencer_videos (\n              title,\n              published_at,\n              video_id,\n              influencer_channels (\n                channel_name,\n                channel_handle\n              )\n            ),\n            speakers (\n              name\n            )\n          ").in("speaker_id",n).order("created_at",{ascending:!1});o||(e=a,r=o)}}if(r)return console.error("Error fetching speaker signals:",r),null;return{speakerName:n,signals:e||[],totalSignals:(null==e?void 0:e.length)||0,stocks:[...new Set(null==e?void 0:e.map(n=>n.stock).filter(Boolean))],channels:[...new Set(null==e?void 0:e.map(n=>{var e,r;return null===(r=n.influencer_videos)||void 0===r?void 0:null===(e=r.influencer_channels)||void 0===e?void 0:e.channel_name}).filter(Boolean))]}}catch(n){return console.error("Error in getInfluencerProfileBySpeaker:",n),null}}async function o(n){try{let e={"005930":"삼성전자","000660":"SK하이닉스","035420":"NAVER","051910":"LG화학","005380":"현대차","086520":"에코프로","009540":"한국가스공사",399720:"퓨처켐",298040:"효성중공업","036930":"주성엔지니어링","042700":"한미반도체","095610":"테스","000720":"현대건설","004170":"신세계","006400":"삼성SDI",267260:"HD현대일렉트릭","090430":"아모레퍼시픽","036570":"NC소프트",207940:"삼성바이오로직스","079160":"CGV",403870:"HPSP",240810:"원익IPS"}[n],r=t.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          video_summary,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ");r=e?r.or("ticker.eq.".concat(n,",stock.eq.").concat(e)):r.eq("ticker",n);let{data:i,error:a}=await r.order("created_at",{ascending:!1});if(a)return console.error("Error fetching stock signals:",a),[];return i||[]}catch(n){return console.error("Error in getStockSignals:",n),[]}}async function s(n,e,r){try{let{data:i,error:a}=await t.from("signal_reports").insert({signal_id:n,reason:e,detail:r||null}).select().single();if(a)throw console.error("Error inserting signal report:",a),a;return i}catch(n){throw console.error("Error in insertSignalReport:",n),n}}async function l(){try{let{data:n,error:e}=await t.from("signal_reports").select("\n        *,\n        influencer_signals (\n          id,\n          stock,\n          ticker,\n          signal,\n          key_quote,\n          reasoning,\n          influencer_videos (\n            title,\n            published_at,\n            video_id,\n            influencer_channels (\n              channel_name,\n              channel_handle\n            )\n          ),\n          speakers (\n            name\n          )\n        )\n      ").order("created_at",{ascending:!1});if(e)return console.error("Error fetching signal reports:",e),[];return n||[]}catch(n){return console.error("Error in getSignalReports:",n),[]}}async function c(n,e){try{let{data:r,error:i}=await t.from("signal_reports").update({status:e}).eq("id",n).select().single();if(i)throw console.error("Error updating report status:",i),i;return r}catch(n){throw console.error("Error in updateReportStatus:",n),n}}async function u(n,e){try{let{data:r,error:i}=await t.from("signal_votes").insert({signal_id:n,vote_type:"like",memo:e}).select().single();if(i)throw console.error("Error inserting signal vote:",i),i;return r}catch(n){throw console.error("Error in insertSignalVote:",n),n}}async function d(n){try{if(!n.length)return{};let{data:e,error:r}=await t.from("signal_votes").select("signal_id").in("signal_id",n);if(r)return console.error("Error fetching signal vote counts:",r),{};let i={};return null==e||e.forEach(n=>{i[n.signal_id]=(i[n.signal_id]||0)+1}),i}catch(n){return console.error("Error in getSignalVoteCounts:",n),{}}}async function f(n,e,r){try{let{data:i,error:a}=await t.from("signal_memos").insert({signal_id:n,memo:e,user_id:r||null}).select().single();if(a)throw console.error("Error inserting signal memo:",a),a;return i}catch(n){throw console.error("Error in insertSignalMemo:",n),n}}async function h(){try{let n=async(n,e)=>{try{let r=t.from(n).select("*",{count:"exact",head:!0});e&&(r=r.eq(e.col,e.val));let{count:i,error:a}=await r;if(a)return console.warn("Count error for ".concat(n,":"),a.message),0;return i||0}catch(n){return 0}},[e,r,i,a]=await Promise.all([n("influencer_signals"),n("signal_votes"),n("signal_reports"),n("signal_memos")]),[o,s,l]=await Promise.all([n("signal_reports",{col:"status",val:"pending"}),n("signal_reports",{col:"status",val:"reviewed"}),n("signal_reports",{col:"status",val:"resolved"})]);return{totalSignals:e,totalVotes:r,totalReports:i,totalMemos:a,pendingReports:o,reviewedReports:s,resolvedReports:l,participationRate:e>0?Math.round((r+i+a)/e*100):0}}catch(n){return console.error("Error in getAdminStats:",n),{totalSignals:0,totalVotes:0,totalReports:0,totalMemos:0,pendingReports:0,reviewedReports:0,resolvedReports:0,participationRate:0}}}},9376:function(n,e,r){var t=r(5475);r.o(t,"usePathname")&&r.d(e,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(e,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(e,{useSearchParams:function(){return t.useSearchParams}})}}]);