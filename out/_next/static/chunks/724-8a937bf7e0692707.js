"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[724],{575:function(n,e,t){t.d(e,{H:function(){return s},a:function(){return l}});var r=t(7437),i=t(2265),o=t(2141);let a=(0,i.createContext)(void 0);function s(n){let{children:e}=n,[t,s]=(0,i.useState)(null),[l,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(!0);(0,i.useEffect)(()=>{o.OQ.auth.getSession().then(n=>{var e;let{data:{session:t}}=n;c(t),s(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null),d(!1)});let{data:{subscription:n}}=o.OQ.auth.onAuthStateChange((n,e)=>{var t;c(e),s(null!==(t=null==e?void 0:e.user)&&void 0!==t?t:null),d(!1)});return()=>n.unsubscribe()},[]);let h=async(n,e)=>{let{error:t}=await o.OQ.auth.signUp({email:n,password:e});return{error:t}},f=async(n,e)=>{let{error:t}=await o.OQ.auth.signInWithPassword({email:n,password:e});return{error:t}},g=async()=>{let{error:n}=await o.OQ.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/invest-sns/")}});return{error:n}},_=async()=>{await o.OQ.auth.signOut()};return(0,r.jsx)(a.Provider,{value:{user:t,session:l,loading:u,signUp:h,signIn:f,signInWithGoogle:g,signOut:_},children:e})}function l(){let n=(0,i.useContext)(a);if(!n)throw Error("useAuth must be used within AuthProvider");return n}},2141:function(n,e,t){t.d(e,{Be:function(){return u},OQ:function(){return r},Y9:function(){return f},getSignalVoteCounts:function(){return d},getStockSignals:function(){return a},hv:function(){return h},kB:function(){return i},l2:function(){return o},oP:function(){return c},pC:function(){return s},to:function(){return l}});let r=(0,t(3053).eI)("https://arypzhotxflimroprmdk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyeXB6aG90eGZsaW1yb3BybWRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwMDYxMTAsImV4cCI6MjA4NzU4MjExMH0.qcqFIvYRiixwu609Wjj9H3HxscU8vNpo9nS_KQ3f00A");async function i(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{let{data:e,error:t}=await r.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          video_summary,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").order("created_at",{ascending:!1}).limit(n);if(t)return console.error("Error fetching latest signals:",t),[];return e||[]}catch(n){return console.error("Error in getLatestInfluencerSignals:",n),[]}}async function o(n){try{let{data:e,error:t}=await r.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").eq("speaker_id",n).order("created_at",{ascending:!1});if(!e||0===e.length){let{data:i}=await r.from("speakers").select("id").eq("name",n);if(i&&i.length>0){let n=i.map(n=>n.id),{data:o,error:a}=await r.from("influencer_signals").select("\n            *,\n            influencer_videos (\n              title,\n              published_at,\n              video_id,\n              influencer_channels (\n                channel_name,\n                channel_handle\n              )\n            ),\n            speakers (\n              name\n            )\n          ").in("speaker_id",n).order("created_at",{ascending:!1});a||(e=o,t=a)}}if(t)return console.error("Error fetching speaker signals:",t),null;return{speakerName:n,signals:e||[],totalSignals:(null==e?void 0:e.length)||0,stocks:[...new Set(null==e?void 0:e.map(n=>n.stock).filter(Boolean))],channels:[...new Set(null==e?void 0:e.map(n=>{var e,t;return null===(t=n.influencer_videos)||void 0===t?void 0:null===(e=t.influencer_channels)||void 0===e?void 0:e.channel_name}).filter(Boolean))]}}catch(n){return console.error("Error in getInfluencerProfileBySpeaker:",n),null}}async function a(n){try{let e={"005930":"삼성전자","000660":"SK하이닉스","035420":"NAVER","051910":"LG화학","005380":"현대차","086520":"에코프로","009540":"한국가스공사",399720:"퓨처켐",298040:"효성중공업","036930":"주성엔지니어링","042700":"한미반도체","095610":"테스","000720":"현대건설","004170":"신세계","006400":"삼성SDI",267260:"HD현대일렉트릭","090430":"아모레퍼시픽","036570":"NC소프트",207940:"삼성바이오로직스","079160":"CGV",403870:"HPSP",240810:"원익IPS"}[n],t=r.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          video_summary,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ");t=e?t.or("ticker.eq.".concat(n,",stock.eq.").concat(e)):t.eq("ticker",n);let{data:i,error:o}=await t.order("created_at",{ascending:!1});if(o)return console.error("Error fetching stock signals:",o),[];return i||[]}catch(n){return console.error("Error in getStockSignals:",n),[]}}async function s(n,e,t){try{let{data:i,error:o}=await r.from("signal_reports").insert({signal_id:n,reason:e,detail:t||null}).select().single();if(o)throw console.error("Error inserting signal report:",o),o;return i}catch(n){throw console.error("Error in insertSignalReport:",n),n}}async function l(){try{let{data:n,error:e}=await r.from("signal_reports").select("\n        *,\n        influencer_signals (\n          id,\n          stock,\n          ticker,\n          signal,\n          key_quote,\n          reasoning,\n          influencer_videos (\n            title,\n            published_at,\n            video_id,\n            influencer_channels (\n              channel_name,\n              channel_handle\n            )\n          ),\n          speakers (\n            name\n          )\n        )\n      ").order("created_at",{ascending:!1});if(e)return console.error("Error fetching signal reports:",e),[];return n||[]}catch(n){return console.error("Error in getSignalReports:",n),[]}}async function c(n,e){try{let{data:t,error:i}=await r.from("signal_reports").update({status:e}).eq("id",n).select().single();if(i)throw console.error("Error updating report status:",i),i;return t}catch(n){throw console.error("Error in updateReportStatus:",n),n}}async function u(n,e){try{let{data:t,error:i}=await r.from("signal_votes").insert({signal_id:n,vote_type:"like",memo:e}).select().single();if(i)throw console.error("Error inserting signal vote:",i),i;return t}catch(n){throw console.error("Error in insertSignalVote:",n),n}}async function d(n){try{if(!n.length)return{};let{data:e,error:t}=await r.from("signal_votes").select("signal_id").in("signal_id",n);if(t)return console.error("Error fetching signal vote counts:",t),{};let i={};return null==e||e.forEach(n=>{i[n.signal_id]=(i[n.signal_id]||0)+1}),i}catch(n){return console.error("Error in getSignalVoteCounts:",n),{}}}async function h(n,e,t){try{let{data:i,error:o}=await r.from("signal_memos").insert({signal_id:n,memo:e,user_id:t||null}).select().single();if(o)throw console.error("Error inserting signal memo:",o),o;return i}catch(n){throw console.error("Error in insertSignalMemo:",n),n}}async function f(){try{let[n,e,t]=await Promise.all([r.from("influencer_signals").select("id",{count:"exact",head:!0}),r.from("signal_votes").select("id",{count:"exact",head:!0}).catch(()=>({count:0})),r.from("signal_reports").select("id",{count:"exact",head:!0}).catch(()=>({count:0}))]),[i,o,a]=await Promise.all([r.from("signal_reports").select("id",{count:"exact",head:!0}).eq("status","pending").catch(()=>({count:0})),r.from("signal_reports").select("id",{count:"exact",head:!0}).eq("status","reviewed").catch(()=>({count:0})),r.from("signal_reports").select("id",{count:"exact",head:!0}).eq("status","resolved").catch(()=>({count:0}))]),s=n.count||0,l=e.count||0,c=t.count||0,u=(await r.from("signal_memos").select("id",{count:"exact",head:!0}).catch(()=>({count:0}))).count||0;return{totalSignals:s,totalVotes:l,totalReports:c,totalMemos:u,pendingReports:i.count||0,reviewedReports:o.count||0,resolvedReports:a.count||0,participationRate:s>0?Math.round((l+c+u)/s*100):0}}catch(n){return console.error("Error in getAdminStats:",n),{totalSignals:0,totalVotes:0,totalReports:0,totalMemos:0,pendingReports:0,reviewedReports:0,resolvedReports:0,participationRate:0}}}},9376:function(n,e,t){var r=t(5475);t.o(r,"usePathname")&&t.d(e,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(e,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(e,{useSearchParams:function(){return r.useSearchParams}})}}]);