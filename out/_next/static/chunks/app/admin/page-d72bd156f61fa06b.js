(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1690:function(e,s,n){Promise.resolve().then(n.bind(n,9725))},9725:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return l}});var t=n(7437),r=n(2265),a=n(2141);function l(){var e,s,n;let[l,i]=(0,r.useState)("dashboard"),[c,d]=(0,r.useState)([]),[o,x]=(0,r.useState)(!0),[u,m]=(0,r.useState)(null),[h,g]=(0,r.useState)({totalSignals:0,totalVotes:0,totalReports:0,totalMemos:0,pendingReports:0,reviewedReports:0,resolvedReports:0,participationRate:0});(0,r.useEffect)(()=>{p()},[]);let p=async()=>{try{x(!0);let[e,s]=await Promise.all([(0,a.to)(),(0,a.Y9)()]);d(e),g(s)}catch(e){console.error("데이터 로딩 실패:",e)}finally{x(!1)}},f=async(e,s)=>{try{await (0,a.oP)(e,s),await p(),alert("상태가 업데이트되었습니다.")}catch(e){console.error("상태 업데이트 실패:",e),alert("상태 업데이트에 실패했습니다.")}},v=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),j=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"reviewed":return"bg-blue-100 text-blue-800";case"resolved":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},y=e=>{switch(e){case"pending":return"대기";case"reviewed":return"검토";case"resolved":return"완료";default:return e}},b=e=>{switch(e){case"매수":return"bg-green-100 text-green-800";case"긍정":return"bg-blue-100 text-blue-800";case"중립":return"bg-yellow-100 text-yellow-800";case"경계":return"bg-orange-100 text-orange-800";case"매도":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=()=>(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"bg-blue-100 rounded-full p-3",children:(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC8"})})}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:h.totalSignals.toLocaleString()}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"총 시그널 수"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"bg-red-100 rounded-full p-3",children:(0,t.jsx)("span",{className:"text-2xl",children:"❤️"})})}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:h.totalVotes.toLocaleString()}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"총 좋아요 수"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"bg-yellow-100 rounded-full p-3",children:(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDEA8"})})}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:h.totalReports.toLocaleString()}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"총 신고 수"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,t.jsx)("div",{className:"bg-green-100 rounded-full p-3",children:(0,t.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCC8"})})}),(0,t.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:[h.participationRate,"%"]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"유저 참여율"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"대기 중"})]}),(0,t.jsx)("p",{className:"text-3xl font-bold text-yellow-600 mb-1",children:h.pendingReports}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"검토 대기 신고"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-blue-400 rounded-full"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"검토 중"})]}),(0,t.jsx)("p",{className:"text-3xl font-bold text-blue-600 mb-1",children:h.reviewedReports}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"검토 진행 신고"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:"처리 완료"})]}),(0,t.jsx)("p",{className:"text-3xl font-bold text-green-600 mb-1",children:h.resolvedReports}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"완료된 신고"})]})]})]}),w=()=>(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["신고 목록 (",c.length,"건)"]})}),0===c.length?(0,t.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,t.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCED"}),(0,t.jsx)("p",{children:"신고된 시그널이 없습니다."})]}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"날짜"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"시그널 내용"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"신고 사유"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"AI 검토 결과"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"AI 수정안"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상태"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작업"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(e=>{var s,n,r,a,l,i,c,d;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:v(e.created_at)}),(0,t.jsx)("td",{className:"px-6 py-4 max-w-xs",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-medium text-sm",children:(null===(s=e.influencer_signals)||void 0===s?void 0:s.stock)||"Unknown"}),(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(b((null===(n=e.influencer_signals)||void 0===n?void 0:n.signal)||"")),children:(null===(r=e.influencer_signals)||void 0===r?void 0:r.signal)||"Unknown"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:(null===(l=e.influencer_signals)||void 0===l?void 0:null===(a=l.speakers)||void 0===a?void 0:a.name)||(null===(d=e.influencer_signals)||void 0===d?void 0:null===(c=d.influencer_videos)||void 0===c?void 0:null===(i=c.influencer_channels)||void 0===i?void 0:i.channel_name)||"Unknown"})]})}),(0,t.jsxs)("td",{className:"px-6 py-4",children:[(0,t.jsx)("div",{className:"text-sm text-gray-900",children:e.reason}),e.detail&&(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-1 truncate max-w-xs",children:e.detail})]}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e.ai_review||(0,t.jsx)("span",{className:"text-yellow-600",children:"대기중"})})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsx)("div",{className:"text-sm text-gray-600",children:e.ai_suggestion||(0,t.jsx)("span",{className:"text-yellow-600",children:"대기중"})})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(j(e.status)),children:y(e.status)})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,t.jsxs)("div",{className:"flex space-x-2",children:[(0,t.jsx)("button",{onClick:()=>m(e),className:"text-[#3182f6] hover:text-[#1b64da] transition-colors",children:"상세"}),(0,t.jsxs)("select",{value:e.status,onChange:s=>f(e.id,s.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1",children:[(0,t.jsx)("option",{value:"pending",children:"대기"}),(0,t.jsx)("option",{value:"reviewed",children:"검토"}),(0,t.jsx)("option",{value:"resolved",children:"완료"})]})]})})]},e.id)})})]})})]})}),_=(e,s)=>(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:s}),(0,t.jsx)("h3",{className:"text-xl font-bold text-[#191f28] mb-2",children:e}),(0,t.jsx)("p",{className:"text-[#8b95a1]",children:"2단계에서 구현 예정입니다"})]});return o?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#3182f6] mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"데이터를 불러오는 중..."})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"관리자 대시보드"}),(0,t.jsx)("p",{className:"text-gray-600",children:"시그널 신고 및 시스템을 관리합니다."})]}),(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("div",{className:"border-b border-gray-200",children:(0,t.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"dashboard",label:"\uD83D\uDCCA 대시보드",icon:"\uD83D\uDCCA"},{id:"reports",label:"\uD83D\uDEA8 신고 관리",icon:"\uD83D\uDEA8"},{id:"ai-suggestions",label:"\uD83E\uDD16 AI 제안",icon:"\uD83E\uDD16"},{id:"prompts",label:"⚙️ 프롬프트 관리",icon:"⚙️"}].map(e=>(0,t.jsx)("button",{onClick:()=>i(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors ".concat(l===e.id?"border-[#3182f6] text-[#3182f6]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.label},e.id))})})}),(()=>{switch(l){case"dashboard":default:return N();case"reports":return w();case"ai-suggestions":return _("AI 제안","\uD83E\uDD16");case"prompts":return _("프롬프트 관리","⚙️")}})()]}),u&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"신고 상세 정보"}),(0,t.jsx)("button",{onClick:()=>m(null),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"신고 정보"}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"신고 일시:"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:v(u.created_at)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"신고 사유:"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:u.reason})]}),u.detail&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"상세 내용:"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:u.detail})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:"처리 상태:"}),(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(j(u.status)),children:y(u.status)})]})]})]}),u.influencer_signals&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"시그널 정보"}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"font-medium",children:u.influencer_signals.stock}),(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(b(u.influencer_signals.signal)),children:u.influencer_signals.signal})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"핵심 발언:"}),(0,t.jsxs)("div",{className:"text-sm bg-white p-3 rounded border italic",children:['"',u.influencer_signals.quote,'"']})]}),u.influencer_signals.analysis_reasoning&&(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"분석 내용:"}),(0,t.jsx)("div",{className:"text-sm bg-white p-3 rounded border whitespace-pre-wrap",children:u.influencer_signals.analysis_reasoning})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["발언자: ",(null===(e=u.influencer_signals.speakers)||void 0===e?void 0:e.name)||(null===(n=u.influencer_signals.influencer_videos)||void 0===n?void 0:null===(s=n.influencer_channels)||void 0===s?void 0:s.channel_name)||"Unknown"]}),u.influencer_signals.influencer_videos&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["영상: ",u.influencer_signals.influencer_videos.title]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)("button",{onClick:()=>m(null),className:"px-4 py-2 text-sm text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"닫기"}),(0,t.jsx)("button",{onClick:()=>{f(u.id,"reviewed"),m(null)},className:"px-4 py-2 text-sm text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:"\uD83D\uDD04 재검토"}),(0,t.jsx)("button",{onClick:()=>{f(u.id,"resolved"),m(null)},className:"px-4 py-2 text-sm text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:"❌ 거절"}),(0,t.jsx)("button",{onClick:()=>{f(u.id,"resolved"),m(null)},className:"px-4 py-2 text-sm text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:"✅ 승인"})]})]})]})})})]})}},2141:function(e,s,n){"use strict";n.d(s,{Be:function(){return o},OQ:function(){return t},Y9:function(){return m},getSignalVoteCounts:function(){return x},getStockSignals:function(){return l},hv:function(){return u},kB:function(){return r},l2:function(){return a},oP:function(){return d},pC:function(){return i},to:function(){return c}});let t=(0,n(3053).eI)("https://arypzhotxflimroprmdk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyeXB6aG90eGZsaW1yb3BybWRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwMDYxMTAsImV4cCI6MjA4NzU4MjExMH0.qcqFIvYRiixwu609Wjj9H3HxscU8vNpo9nS_KQ3f00A");async function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{let{data:s,error:n}=await t.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          video_summary,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").order("created_at",{ascending:!1}).limit(e);if(n)return console.error("Error fetching latest signals:",n),[];return s||[]}catch(e){return console.error("Error in getLatestInfluencerSignals:",e),[]}}async function a(e){try{let{data:s,error:n}=await t.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").eq("speaker_id",e).order("created_at",{ascending:!1});if(!s||0===s.length){let{data:r}=await t.from("speakers").select("id").eq("name",e);if(r&&r.length>0){let e=r.map(e=>e.id),{data:a,error:l}=await t.from("influencer_signals").select("\n            *,\n            influencer_videos (\n              title,\n              published_at,\n              video_id,\n              influencer_channels (\n                channel_name,\n                channel_handle\n              )\n            ),\n            speakers (\n              name\n            )\n          ").in("speaker_id",e).order("created_at",{ascending:!1});l||(s=a,n=l)}}if(n)return console.error("Error fetching speaker signals:",n),null;return{speakerName:e,signals:s||[],totalSignals:(null==s?void 0:s.length)||0,stocks:[...new Set(null==s?void 0:s.map(e=>e.stock).filter(Boolean))],channels:[...new Set(null==s?void 0:s.map(e=>{var s,n;return null===(n=e.influencer_videos)||void 0===n?void 0:null===(s=n.influencer_channels)||void 0===s?void 0:s.channel_name}).filter(Boolean))]}}catch(e){return console.error("Error in getInfluencerProfileBySpeaker:",e),null}}async function l(e){try{let s={"005930":"삼성전자","000660":"SK하이닉스","035420":"NAVER","051910":"LG화학","005380":"현대차","086520":"에코프로","009540":"한국가스공사",399720:"퓨처켐",298040:"효성중공업","036930":"주성엔지니어링","042700":"한미반도체","095610":"테스","000720":"현대건설","004170":"신세계","006400":"삼성SDI",267260:"HD현대일렉트릭","090430":"아모레퍼시픽","036570":"NC소프트",207940:"삼성바이오로직스","079160":"CGV",403870:"HPSP",240810:"원익IPS"}[e],n=t.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          video_summary,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ");n=s?n.or("ticker.eq.".concat(e,",stock.eq.").concat(s)):n.eq("ticker",e);let{data:r,error:a}=await n.order("created_at",{ascending:!1});if(a)return console.error("Error fetching stock signals:",a),[];return r||[]}catch(e){return console.error("Error in getStockSignals:",e),[]}}async function i(e,s,n){try{let{data:r,error:a}=await t.from("signal_reports").insert({signal_id:e,reason:s,detail:n||null}).select().single();if(a)throw console.error("Error inserting signal report:",a),a;return r}catch(e){throw console.error("Error in insertSignalReport:",e),e}}async function c(){try{let{data:e,error:s}=await t.from("signal_reports").select("\n        *,\n        influencer_signals (\n          id,\n          stock,\n          ticker,\n          signal,\n          quote,\n          analysis_reasoning,\n          influencer_videos (\n            title,\n            published_at,\n            video_id,\n            influencer_channels (\n              channel_name,\n              channel_handle\n            )\n          ),\n          speakers (\n            name\n          )\n        )\n      ").order("created_at",{ascending:!1});if(s)return console.error("Error fetching signal reports:",s),[];return e||[]}catch(e){return console.error("Error in getSignalReports:",e),[]}}async function d(e,s){try{let{data:n,error:r}=await t.from("signal_reports").update({status:s}).eq("id",e).select().single();if(r)throw console.error("Error updating report status:",r),r;return n}catch(e){throw console.error("Error in updateReportStatus:",e),e}}async function o(e,s){try{let{data:n,error:r}=await t.from("signal_votes").insert({signal_id:e,vote_type:"like",memo:s}).select().single();if(r)throw console.error("Error inserting signal vote:",r),r;return n}catch(e){throw console.error("Error in insertSignalVote:",e),e}}async function x(e){try{if(!e.length)return{};let{data:s,error:n}=await t.from("signal_votes").select("signal_id").in("signal_id",e);if(n)return console.error("Error fetching signal vote counts:",n),{};let r={};return null==s||s.forEach(e=>{r[e.signal_id]=(r[e.signal_id]||0)+1}),r}catch(e){return console.error("Error in getSignalVoteCounts:",e),{}}}async function u(e,s,n){try{let{data:r,error:a}=await t.from("signal_memos").insert({signal_id:e,memo:s,user_id:n||null}).select().single();if(a)throw console.error("Error inserting signal memo:",a),a;return r}catch(e){throw console.error("Error in insertSignalMemo:",e),e}}async function m(){try{let[e,s,n]=await Promise.all([t.from("influencer_signals").select("id",{count:"exact",head:!0}),t.from("signal_votes").select("id",{count:"exact",head:!0}).catch(()=>({count:0})),t.from("signal_reports").select("id",{count:"exact",head:!0}).catch(()=>({count:0}))]),[r,a,l]=await Promise.all([t.from("signal_reports").select("id",{count:"exact",head:!0}).eq("status","pending").catch(()=>({count:0})),t.from("signal_reports").select("id",{count:"exact",head:!0}).eq("status","reviewed").catch(()=>({count:0})),t.from("signal_reports").select("id",{count:"exact",head:!0}).eq("status","resolved").catch(()=>({count:0}))]),i=e.count||0,c=s.count||0,d=n.count||0,o=(await t.from("signal_memos").select("id",{count:"exact",head:!0}).catch(()=>({count:0}))).count||0;return{totalSignals:i,totalVotes:c,totalReports:d,totalMemos:o,pendingReports:r.count||0,reviewedReports:a.count||0,resolvedReports:l.count||0,participationRate:i>0?Math.round((c+d+o)/i*100):0}}catch(e){return console.error("Error in getAdminStats:",e),{totalSignals:0,totalVotes:0,totalReports:0,totalMemos:0,pendingReports:0,reviewedReports:0,resolvedReports:0,participationRate:0}}}}},function(e){e.O(0,[53,971,117,744],function(){return e(e.s=1690)}),_N_E=e.O()}]);