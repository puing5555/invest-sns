(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966,141],{4449:function(e,t,s){Promise.resolve().then(s.bind(s,5969))},5969:function(e,t,s){"use strict";s.d(t,{default:function(){return i}});var n=s(7437),r=s(2265),l=s(7648),a=s(9376),c=s(2141);function i(e){let{id:t}=e,s=(0,a.useRouter)(),[i,d]=(0,r.useState)(!1),[o,x]=(0,r.useState)(null),[u,f]=(0,r.useState)(null),[m,h]=(0,r.useState)(!0),[b,p]=(0,r.useState)(null);return((0,r.useEffect)(()=>{(async()=>{try{var e,s,n;h(!0),p(null);let r=await (0,c.j7)(t);if(!r){p("인플루언서를 찾을 수 없습니다");return}let l={id:r.id,name:r.channel_name,avatar:r.channel_name.charAt(0),badge:"유튜버",subscribers:r.subscriber_count?"".concat(Math.floor(r.subscriber_count/1e4),"만"):"N/A",videos:0,mentions:(null===(e=r.signals)||void 0===e?void 0:e.length)||0,avgReturn:"N/A",positiveRatio:"N/A",totalSignals:(null===(s=r.signals)||void 0===s?void 0:s.length)||0,coverStocks:new Set(null===(n=r.signals)||void 0===n?void 0:n.map(e=>e.stock)).size||0,stocks:[],signalHistory:(r.signals||[]).map(e=>{var t,s,n;let l=(null===(t=e.influencer_videos)||void 0===t?void 0:t.published_at)?new Date(e.influencer_videos.published_at):new Date,a=(null===(s=e.influencer_videos)||void 0===s?void 0:s.video_id)?"https://youtube.com/watch?v=".concat(e.influencer_videos.video_id):"#";return{date:l.toLocaleDateString("ko-KR",{month:"2-digit",day:"2-digit"}),stock:e.stock,stockCode:e.ticker,signal:e.signal,content:e.key_quote||"키 인용문이 없습니다.",returnPct:"N/A",source:r.channel_name,videoUrl:a,timestamp:e.timestamp?"[".concat(Math.floor(e.timestamp/60),":").concat(String(e.timestamp%60).padStart(2,"0"),"]"):"[0:00]",videoTitle:(null===(n=e.influencer_videos)||void 0===n?void 0:n.title)||"Unknown Video",summary:e.reasoning||"분석 내용이 없습니다."}})};f(l)}catch(e){console.error("Error loading influencer data:",e),p("데이터를 불러오는 중 오류가 발생했습니다")}finally{h(!1)}})()},[t]),m)?(0,n.jsx)("div",{className:"min-h-screen bg-[#f4f4f4] flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-4xl mb-4",children:"⏳"}),(0,n.jsx)("h2",{className:"text-xl font-bold text-[#191f28] mb-2",children:"데이터를 불러오는 중..."})]})}):b||!u?(0,n.jsx)("div",{className:"min-h-screen bg-[#f4f4f4] flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDD0D"}),(0,n.jsx)("h2",{className:"text-xl font-bold text-[#191f28] mb-2",children:b||"인플루언서를 찾을 수 없습니다"}),(0,n.jsx)(l.default,{href:"/explore/influencer",className:"text-[#3182f6]",children:"← 인플루언서 목록으로"})]})}):(0,n.jsxs)("div",{className:"min-h-screen bg-[#f4f4f4]",children:[(0,n.jsxs)("div",{className:"bg-white border-b border-[#e8e8e8] px-4 py-6",children:[(0,n.jsx)("div",{className:"mb-4",children:(0,n.jsxs)("button",{onClick:()=>s.push("/explore/influencer"),className:"flex items-center gap-2 text-[#8b95a1] hover:text-[#191f28] transition-colors",children:[(0,n.jsx)("span",{className:"text-lg",children:"←"}),(0,n.jsx)("span",{className:"text-sm",children:"인플루언서 목록"})]})}),(0,n.jsxs)("div",{className:"flex items-start gap-5",children:[(0,n.jsx)("div",{className:"w-16 h-16 rounded-full bg-[#e8f4fd] flex items-center justify-center text-2xl font-bold text-[#3182f6] flex-shrink-0",children:u.avatar}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-1 flex-wrap",children:[(0,n.jsx)("h1",{className:"text-xl font-bold text-[#191f28]",children:u.name}),(0,n.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 text-[#3182f6] text-xs rounded-full border border-blue-200",children:u.badge}),(0,n.jsx)("span",{className:"px-2 py-0.5 bg-[#f2f4f6] text-[#8b95a1] text-xs rounded-full",children:"한국주식 \xb7 미국주식"})]}),(0,n.jsxs)("div",{className:"text-sm text-[#8b95a1] mb-3",children:["구독자 ",u.subscribers," \xb7 분석 영상 ",u.videos,"개 \xb7 종목 언급 ",u.mentions,"건"]}),(0,n.jsxs)("div",{className:"flex gap-5 flex-wrap",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{className:"text-lg font-bold text-[#3182f6]",children:u.positiveRatio}),(0,n.jsx)("span",{className:"text-xs text-[#8b95a1] ml-1",children:"긍정 신호 비율"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{className:"text-lg font-bold text-[#191f28]",children:[u.totalSignals,"건"]}),(0,n.jsx)("span",{className:"text-xs text-[#8b95a1] ml-1",children:"총 신호"})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{className:"text-lg font-bold text-[#191f28]",children:[u.coverStocks,"개"]}),(0,n.jsx)("span",{className:"text-xs text-[#8b95a1] ml-1",children:"커버 종목"})]})]})]}),(0,n.jsx)("button",{onClick:()=>d(!i),className:"px-5 py-2.5 rounded-lg text-sm font-medium transition-colors flex-shrink-0 ".concat(i?"bg-[#f2f4f6] text-[#8b95a1] border border-[#e8e8e8]":"bg-[#3182f6] text-white hover:bg-[#2171e5]"),children:i?"팔로잉":"팔로우"})]})]}),(0,n.jsxs)("div",{className:"px-4 py-4 space-y-4",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg border border-[#e8e8e8] p-5",children:[(0,n.jsx)("div",{className:"text-xs font-medium text-[#8b95a1] mb-3",children:"\uD83D\uDCCC 관심 종목 (클릭 시 해당 종목 차트 + 신호 확인)"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:u.stocks.map(e=>(0,n.jsxs)(l.default,{href:"/stock/".concat(e.code,"?tab=influencer"),className:"px-3 py-2 bg-[#e8f4fd] text-[#3182f6] rounded-full text-sm border border-blue-200 hover:bg-blue-200 transition-colors",children:[e.name," (",e.mentions,")"]},e.code))})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg border border-[#e8e8e8] p-5",children:[(0,n.jsx)("div",{className:"text-xs font-medium text-[#8b95a1] mb-3",children:"\uD83D\uDCCA 종목별 신호 차트"}),(0,n.jsxs)("div",{className:"flex gap-2 mb-4 flex-wrap",children:[(0,n.jsxs)("span",{className:"px-3 py-1.5 bg-[#3182f6] text-white rounded-full text-xs",children:["전체 (",u.totalSignals,")"]}),u.stocks.map(e=>(0,n.jsxs)("span",{className:"px-3 py-1.5 bg-[#f2f4f6] text-[#8b95a1] rounded-full text-xs border border-[#e8e8e8] hover:bg-[#e9ecef] cursor-pointer",children:[e.name," (",e.mentions,")"]},e.code))]}),(0,n.jsxs)("div",{className:"relative h-48 bg-[#f8f9fa] rounded-lg border border-[#e8e8e8] overflow-hidden",children:[(0,n.jsxs)("svg",{viewBox:"0 0 500 180",className:"w-full h-full",children:[(0,n.jsx)("polyline",{fill:"none",stroke:"#d1d5db",strokeWidth:"1.5",points:"20,140 80,120 140,100 200,110 260,80 320,70 380,60 440,50 480,45"}),u.signalHistory.slice(0,6).map((e,t)=>(0,n.jsx)("circle",{cx:60+75*t,cy:130-15*t+(t%2==0?-10:10),r:"6",fill:function(e){switch(e){case"BUY":return"#3182f6";case"POSITIVE":return"#22c55e";case"NEUTRAL":return"#eab308";case"CONCERN":return"#f97316";case"SELL":return"#ef4444";default:return"#9ca3af"}}(e.signal),stroke:"white",strokeWidth:"2"},t))]}),(0,n.jsxs)("div",{className:"absolute bottom-2 left-4 flex gap-3 text-[10px] text-[#8b95a1]",children:[(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-[#3182f6] mr-1"}),"매수"]}),(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-[#22c55e] mr-1"}),"긍정"]}),(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-[#eab308] mr-1"}),"중립"]}),(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-[#f97316] mr-1"}),"경계"]}),(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"inline-block w-2 h-2 rounded-full bg-[#ef4444] mr-1"}),"매도"]})]})]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg border border-[#e8e8e8] p-5",children:[(0,n.jsx)("div",{className:"text-xs font-medium text-[#8b95a1] mb-3",children:"\uD83D\uDCCB 전체 발언 이력"}),(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{className:"border-b border-[#e8e8e8]",children:[(0,n.jsx)("th",{className:"text-left py-3 px-2 text-[#8b95a1] font-medium text-xs",children:"날짜"}),(0,n.jsx)("th",{className:"text-left py-3 px-2 text-[#8b95a1] font-medium text-xs",children:"종목"}),(0,n.jsx)("th",{className:"text-left py-3 px-2 text-[#8b95a1] font-medium text-xs",children:"신호"}),(0,n.jsx)("th",{className:"text-left py-3 px-2 text-[#8b95a1] font-medium text-xs",children:"핵심 발언"}),(0,n.jsx)("th",{className:"text-left py-3 px-2 text-[#8b95a1] font-medium text-xs",children:"수익률"}),(0,n.jsx)("th",{className:"text-left py-3 px-2 text-[#8b95a1] font-medium text-xs",children:"출처"}),(0,n.jsx)("th",{className:"text-left py-3 px-2 text-[#8b95a1] font-medium text-xs",children:"영상"})]})}),(0,n.jsx)("tbody",{children:u.signalHistory.map((e,t)=>(0,n.jsxs)("tr",{className:"border-b border-[#f0f0f0] hover:bg-[#f8f9fa] cursor-pointer",onClick:()=>x(e),children:[(0,n.jsx)("td",{className:"py-3 px-2 text-[#191f28] whitespace-nowrap",children:e.date}),(0,n.jsx)("td",{className:"py-3 px-2",children:(0,n.jsx)(l.default,{href:"/stock/".concat(e.stockCode,"?tab=influencer"),className:"text-[#191f28] font-medium hover:text-[#3182f6]",children:e.stock})}),(0,n.jsx)("td",{className:"py-3 px-2",children:(0,n.jsx)("span",{className:"px-2 py-0.5 rounded-full text-[10px] font-medium border ".concat((0,c.R8)(e.signal)),children:e.signal})}),(0,n.jsx)("td",{className:"py-3 px-2 text-[#191f28] max-w-[200px] truncate",children:e.content}),(0,n.jsx)("td",{className:"py-3 px-2 font-medium ".concat(e.returnPct.startsWith("+")?"text-[#22c55e]":"text-[#ef4444]"),children:e.returnPct}),(0,n.jsx)("td",{className:"py-3 px-2 text-[#8b95a1]",children:e.source}),(0,n.jsx)("td",{className:"py-3 px-2",children:(0,n.jsx)("button",{onClick:()=>x(e),className:"text-[#3182f6] hover:underline text-xs",children:"▶ 영상"})})]},t))})]})})]})]}),o&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>x(null),children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl max-w-lg w-full max-h-[85vh] overflow-y-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-[#e8e8e8]",children:[(0,n.jsx)("h3",{className:"font-bold text-[#191f28] text-lg",children:"▶ 영상 분석"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("button",{className:"w-9 h-9 rounded-full bg-[#f8f9fa] flex items-center justify-center text-[#8b95a1] hover:bg-[#e9ecef]",title:"메모 저장",children:"♡"}),(0,n.jsx)("button",{className:"w-9 h-9 rounded-full bg-[#f8f9fa] flex items-center justify-center text-[#8b95a1] hover:bg-[#e9ecef]",title:"신고",children:"⚠️"}),(0,n.jsx)("button",{onClick:()=>x(null),className:"w-9 h-9 rounded-full bg-[#f8f9fa] flex items-center justify-center text-[#8b95a1] hover:bg-[#e9ecef]",children:"✕"})]})]}),(0,n.jsxs)("div",{className:"px-6 py-5",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,n.jsx)("span",{className:"text-xl font-bold text-[#191f28]",children:o.stock}),(0,n.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium border ".concat((0,c.R8)(o.signal)),children:o.signal})]}),(0,n.jsxs)("p",{className:"text-sm text-[#8b95a1] mb-5",children:[o.videoTitle," \xb7 ",o.date]}),(0,n.jsxs)("div",{className:"mb-5",children:[(0,n.jsx)("div",{className:"text-xs font-medium text-[#8b95a1] mb-2",children:"\uD83D\uDCAC 발언 내용"}),(0,n.jsxs)("div",{className:"bg-[#f8f9fa] rounded-xl p-4 border border-[#e8e8e8]",children:[(0,n.jsx)("p",{className:"text-[#191f28] leading-relaxed text-[15px]",children:o.content}),(0,n.jsxs)("p",{className:"text-xs text-[#3182f6] mt-2",children:["타임스탬프: ",o.timestamp]})]})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("div",{className:"text-xs font-medium text-[#8b95a1] mb-2",children:"\uD83D\uDCCE 영상 요약"}),(0,n.jsx)("p",{className:"text-[#4e5968] text-sm leading-relaxed",children:o.summary})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)("button",{onClick:()=>{x(null),s.push("/stock/".concat(o.stockCode,"?tab=influencer"))},className:"flex-1 py-3.5 bg-[#e8f4fd] text-[#3182f6] rounded-xl text-center font-medium hover:bg-[#d0e8fc] transition-colors border border-blue-200",children:"\uD83D\uDCCA 차트보기"}),(0,n.jsx)("a",{href:o.videoUrl,target:"_blank",rel:"noopener noreferrer",className:"flex-1 py-3.5 bg-[#3182f6] text-white rounded-xl text-center font-medium hover:bg-[#2171e5] transition-colors",children:"▶ 영상보기"})]})]})]})})]})}},2141:function(e,t,s){"use strict";s.d(t,{OQ:function(){return n},R8:function(){return r},getStockSignals:function(){return c},j7:function(){return a},kB:function(){return l}});let n=(0,s(3053).eI)("https://arypzhotxflimroprmdk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyeXB6aG90eGZsaW1yb3BybWRrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIwMDYxMTAsImV4cCI6MjA4NzU4MjExMH0.qcqFIvYRiixwu609Wjj9H3HxscU8vNpo9nS_KQ3f00A"),r=e=>{switch(e){case"매수":case"BUY":return"bg-blue-100 text-[#3182f6] border-blue-200";case"긍정":case"POSITIVE":return"bg-green-100 text-[#22c55e] border-green-200";case"중립":case"NEUTRAL":return"bg-yellow-100 text-[#eab308] border-yellow-200";case"경계":case"CONCERN":return"bg-orange-100 text-[#f97316] border-orange-200";case"매도":case"SELL":return"bg-red-100 text-[#ef4444] border-red-200";default:return"bg-gray-100 text-gray-600 border-gray-200"}};async function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;try{let{data:t,error:s}=await n.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").order("created_at",{ascending:!1}).limit(e);if(s)return console.error("Error fetching latest signals:",s),[];return t||[]}catch(e){return console.error("Error in getLatestInfluencerSignals:",e),[]}}async function a(e){try{let{data:t,error:s}=await n.from("influencer_channels").select("*").eq("channel_handle",e).single();if(s)return console.error("Error fetching channel:",s),null;let{data:r,error:l}=await n.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id\n        ),\n        speakers (\n          name\n        )\n      ").in("video_id",await n.from("influencer_videos").select("id").eq("channel_id",t.id).then(e=>{let{data:t}=e;return(null==t?void 0:t.map(e=>e.id))||[]})).order("created_at",{ascending:!1});if(l)return console.error("Error fetching signals:",l),{...t,signals:[]};return{...t,signals:r||[]}}catch(e){return console.error("Error in getInfluencerProfile:",e),null}}async function c(e){try{let{data:t,error:s}=await n.from("influencer_signals").select("\n        *,\n        influencer_videos (\n          title,\n          published_at,\n          video_id,\n          channel_id,\n          influencer_channels (\n            channel_name,\n            channel_handle\n          )\n        ),\n        speakers (\n          name\n        )\n      ").eq("ticker",e).order("created_at",{ascending:!1});if(s)return console.error("Error fetching stock signals:",s),[];return t||[]}catch(e){return console.error("Error in getStockSignals:",e),[]}}},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[648,53,971,117,744],function(){return e(e.s=4449)}),_N_E=e.O()}]);